{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import Navbar from\"../../components/navbar/NavbarFreelancer\";import Footer from\"../../components/Footer/Footer\";import noData from\"../../assets/images/home/nodata.jpg\";import styles from\"./Dashboard.module.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DashboardFreelancer=()=>{const[jobs,setJobs]=useState([]);const[error,setError]=useState(null);const[profileData,setProfileData]=useState({});useEffect(()=>{const fetchAcceptedJobs=async()=>{try{const userId=localStorage.getItem(\"_id\");// If userId is null, don't make the API request\nif(!userId){setError(\"User ID not found.\");return;}const token=sessionStorage.getItem(\"token\");const response=await axios.get(\"http://localhost:8001/jobs/accepted?userId=\".concat(userId),{headers:{Authorization:\"Bearer \".concat(token)},withCredentials:true});const{success,data,message}=response.data;if(success){setJobs(data);// Fetch profile data for each job's producer\nconst profileData={};for(const job of data){const producerId=job.userId;const profileResponse=await axios.get(\"http://localhost:8001/profile/getproducerprofile/\".concat(producerId),{headers:{Authorization:\"Bearer \".concat(token)}},{withCredentials:true});const{success:profileSuccess,profile}=profileResponse.data;if(profileSuccess){profileData[producerId]=profile;}else{console.error(\"Failed to fetch profile data:\",profileResponse.data);}}setProfileData(profileData);}else{setError(message);}}catch(error){console.error(\"Error fetching accepted jobs:\",error);setError(\"An error occurred while fetching accepted jobs.\");}};fetchAcceptedJobs();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.cardsContainer,children:[jobs.length>0?jobs.map(job=>{const producerId=job.userId;return/*#__PURE__*/_jsxs(\"div\",{className:styles.Jobcards,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.photoWrapper,children:[/*#__PURE__*/_jsx(\"img\",{src:profileData&&profileData[producerId]&&profileData[producerId].profileImage?\"http://localhost:8001/\".concat(profileData[producerId].profileImage.replace(/\\\\/g,\"/\")):\"\",alt:\"Profile\",className:styles.profilePhoto}),/*#__PURE__*/_jsxs(\"h3\",{className:styles.by,children:[\" \",\"-\",profileData[producerId]&&profileData[producerId].username,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:job.title}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Duration: \",job.duration]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Salary: \",job.salary]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Jobtype : \",job.jobType]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Location: \",job.location]})]})]},job._id);}):/*#__PURE__*/_jsx(\"img\",{src:noData,className:\"w-1/2\"}),error&&/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default DashboardFreelancer;","map":{"version":3,"names":["React","useEffect","useState","axios","Navbar","Footer","noData","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DashboardFreelancer","jobs","setJobs","error","setError","profileData","setProfileData","fetchAcceptedJobs","userId","localStorage","getItem","token","sessionStorage","response","get","concat","headers","Authorization","withCredentials","success","data","message","job","producerId","profileResponse","profileSuccess","profile","console","children","className","cardsContainer","length","map","Jobcards","photoWrapper","src","profileImage","replace","alt","profilePhoto","by","username","title","duration","salary","jobType","location","_id"],"sources":["D:/Development/Good Projects/retrocraft-hub/frontend/src/pages/dashboard/DashboardFreelancer.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"../../components/navbar/NavbarFreelancer\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport noData from \"../../assets/images/home/nodata.jpg\";\r\nimport styles from \"./Dashboard.module.css\";\r\n\r\nconst DashboardFreelancer = () => {\r\n  const [jobs, setJobs] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [profileData, setProfileData] = useState({});\r\n\r\n  useEffect(() => {\r\n    const fetchAcceptedJobs = async () => {\r\n      try {\r\n        const userId = localStorage.getItem(\"_id\");\r\n\r\n        // If userId is null, don't make the API request\r\n        if (!userId) {\r\n          setError(\"User ID not found.\");\r\n          return;\r\n        }\r\n        const token = sessionStorage.getItem(\"token\");\r\n        const response = await axios.get(\r\n          `http://localhost:8001/jobs/accepted?userId=${userId}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n            withCredentials: true,\r\n          }\r\n        );\r\n\r\n        const { success, data, message } = response.data;\r\n\r\n        if (success) {\r\n          setJobs(data);\r\n          // Fetch profile data for each job's producer\r\n          const profileData = {};\r\n          for (const job of data) {\r\n            const producerId = job.userId;\r\n            const profileResponse = await axios.get(\r\n              `http://localhost:8001/profile/getproducerprofile/${producerId}`,\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${token}`,\r\n                },\r\n              },\r\n              { withCredentials: true }\r\n            );\r\n\r\n            const { success: profileSuccess, profile } = profileResponse.data;\r\n            if (profileSuccess) {\r\n              profileData[producerId] = profile;\r\n            } else {\r\n              console.error(\r\n                \"Failed to fetch profile data:\",\r\n                profileResponse.data\r\n              );\r\n            }\r\n          }\r\n\r\n          setProfileData(profileData);\r\n        } else {\r\n          setError(message);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching accepted jobs:\", error);\r\n        setError(\"An error occurred while fetching accepted jobs.\");\r\n      }\r\n    };\r\n\r\n    fetchAcceptedJobs();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className={styles.cardsContainer}>\r\n        {jobs.length > 0 ? (\r\n          jobs.map((job) => {\r\n            const producerId = job.userId;\r\n\r\n            return (\r\n              <div key={job._id} className={styles.Jobcards}>\r\n                <div className={styles.photoWrapper}>\r\n                  <img\r\n                    src={\r\n                      profileData &&\r\n                      profileData[producerId] &&\r\n                      profileData[producerId].profileImage\r\n                        ? `http://localhost:8001/${profileData[\r\n                            producerId\r\n                          ].profileImage.replace(/\\\\/g, \"/\")}`\r\n                        : \"\"\r\n                    }\r\n                    alt=\"Profile\"\r\n                    className={styles.profilePhoto}\r\n                  />\r\n                  <h3 className={styles.by}>\r\n                    {\" \"}\r\n                    -\r\n                    {profileData[producerId] &&\r\n                      profileData[producerId].username}{\" \"}\r\n                  </h3>\r\n                </div>\r\n                <div>\r\n                  <h3 className={styles.title}>{job.title}</h3>\r\n                  <h3>Duration: {job.duration}</h3>\r\n                  <h3>Salary: {job.salary}</h3>\r\n                  <h3>Jobtype : {job.jobType}</h3>\r\n                  <h3>Location: {job.location}</h3>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <img src={noData} className=\"w-1/2\" />\r\n        )}\r\n        {error && <p>{error}</p>}\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DashboardFreelancer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}